<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
  import {
    getAuth,
    onAuthStateChanged,
    signOut
  } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-auth.js";

  // ðŸ” Firebase config
  const firebaseConfig = {
    apiKey: "AIzaSyBxBG3pfjle1xXYcHuozHs0CgRd-uDwxLo",
    authDomain: "thecrisrecords1.firebaseapp.com",
    projectId: "thecrisrecords1",
    appId: "1:1050112675638:web:a7da5497827fd94dba6d97"
  };

  // ðŸš€ Init
  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);

  // ðŸ‘€ Verificar sesiÃ³n y mostrar saludo
  onAuthStateChanged(auth, (user) => {
    if (!user) {
      window.location.href = "index.html";
      return;
    }

    let name = "Usuario";

    if (user.displayName) {
      name = user.displayName;
    } else if (user.email) {
      name = user.email.split("@")[0];
    }

    // Capitalizar
    name = name.charAt(0).toUpperCase() + name.slice(1);

    const welcomeEl = document.getElementById("welcome");
    if (welcomeEl) {
      welcomeEl.textContent = `Â¡Â¡Hola, ${name}!!`;
    }
  });

  // ðŸšª Logout
  const logoutBtn = document.getElementById("logout");
  if (logoutBtn) {
    logoutBtn.addEventListener("click", async () => {
      await signOut(auth);
      window.location.href = "index.html";
    });
  }
</script>